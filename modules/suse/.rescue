SUSE=http://download.opensuse.org/tumbleweed/repo/oss/

function describe() {
  echo -n "OpenSUSE netinstaller"
}

function clean() {
  rm -rf "modules/$module/"{linux,initrd}{32,64}
}

function pre() {
  [[ -f modules/$module/vmlinuz
  && -f modules/$module/initrd.gz ]] && return 0
  status "Downloading OpenSUSE netinstaller (32-bit)"
  wget -c -O "modules/$module/linux32" "$SUSE/boot/i386/loader/linux"
  wget -c -O "modules/$module/initrd32" "$SUSE/boot/i386/loader/initrd"
  status "Downloading OpenSUSE netinstaller (64-bit)"
  wget -c -O "modules/$module/linux64" "$SUSE/boot/x86_64/loader/linux"
  wget -c -O "modules/$module/initrd64" "$SUSE/boot/x86_64/loader/initrd"
}

function boot() {
  cat <<EOF
label susenet32
  menu label OpenSUSE Network Installer (32-bit)
  kernel /boot/suse/linux32
  append initrd=/boot/suse/initrd32 showopts

label susenet64
  menu label OpenSUSE Network Installer (64-bit)
  kernel /boot/suse/linux64
  append initrd=/boot/suse/initrd64 showopts

label susenet32rescue
  menu label OpenSUSE Network Rescue Mode (32-bit)
  kernel /boot/suse/linux32
  append initrd=/boot/suse/initrd32 showopts rescue=1

label susenet64rescue
  menu label OpenSUSE Network Rescue Mode (64-bit)
  kernel /boot/suse/linux64
  append initrd=/boot/suse/initrd64 showopts rescue=1
EOF
}
